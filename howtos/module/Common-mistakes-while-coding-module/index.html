<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>Twelve things to watch out for when coding a PrestaShop module</title>
    <link href="/style.css?1685699305" rel="stylesheet">

    <link rel="shortcut icon" type="image/png" href="/favicon.png" />

    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    
<meta property="og:title" content="Twelve things to watch out for when coding a PrestaShop module" />
<meta property="og:description" content="PrestaShop has been around for many years, during which thousands of modules were made by thousands of developers, yet we still see the same simple mistakes being made, even though they could easily be avoided." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://build.prestashop-project.org/howtos/module/Common-mistakes-while-coding-module/" />
    <meta property="article:section" content="howtos" />
    <meta property="article:published_time" content="2016-07-25T09:10:00+02:00" />
    <meta property="article:modified_time" content="2016-07-25T09:10:00+02:00" />

  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:image" content="https://build.prestashop-project.org/assets/images/theme/meta-logo-build.png">
<meta name="twitter:title" content="Twelve things to watch out for when coding a PrestaShop module"/>
<meta name="twitter:description" content="Do you commit these mistakes? Do not make them further."/>
<meta name="twitter:site" content="@PrestaShopOrg"/>

		<script async src="https://www.googletagmanager.com/gtag/js?id=G-QVW3BYSGJJ"></script>
		<script>
			var doNotTrack = false;
			if (!doNotTrack) {
				window.dataLayer = window.dataLayer || [];
				function gtag(){dataLayer.push(arguments);}
				gtag('js', new Date());
				gtag('config', 'G-QVW3BYSGJJ', { 'anonymize_ip': false });
			}
		</script>
	
    
</head>


  <body>

  <header class="site-header">

  <div class="container">
    <div class="row clearfix">

      <div class="menu-button"><i class="icon icon-store"></i></div>
      <div class="search-button"><i class="icon icon-magnifying-glass"></i></div>

      <div id="logo" class="">
        
        <a href="https://build.prestashop-project.org">
          <img src="/assets/images/theme/new-logo.png" alt="PrestaShop Developers&#39; blog Logo">
        </a>
      </div>

      <div id="navigation" class="">
        <nav>
  <ul id="main-navigation" class="nav navbar-nav navbar-collapse">
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
        News <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li><a href="/tag/releases/">Latest releases</a></li>
        <li><a href="/tag/core-monthly/">Core Monthly</a></li>
        <li><a href="/tag/event/">Events &amp; Live Updates</a></li>
      </ul>
    </li>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
        Project <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li><a href="/tag/8.1/">Articles on 8.1</a></li>
        <li><a href="/tag/8.0/">Articles on 8.0</a></li>
        <li><a href="/tag/1.7/">Articles on 1.7</a></li>
        <li><a href="/tag/1.6/">Articles on 1.6</a></li>
        <li><a href="https://nightly.prestashop-project.org">Nightly Builds</a></li>
      </ul>
    </li>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
        Contribute <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li><a href="/howtos/misc/contribute-to-prestashop/">Contributor's guide</a></li>
        <li><a href="http://contributors.prestashop-project.org/">Contributor's page</a></li>
        <li><a href="http://translators.prestashop.com/">Translators' page</a></li>
      </ul>
    </li>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
        Learn <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li><a href="/howtos/">How-tos</a></li>
        <li><a href="/tools/">Tools</a></li>
        <li><a href="https://devdocs.prestashop-project.org/">Devdocs</a></li>
        <li><a href="/news/how-to-best-contact-us/">How to best contact us</a></li>
      </ul>
    </li>
    <li class="">
      <a href="/about/">About</a>
    </li>
  </ul>
</nav>

      </div>

      <div id="algolia-container">
        <div class="aa-input-container" id="aa-input-container">
          <input type="search" id="aa-search-input" class="aa-input-search form-control" placeholder="Search..." name="search" autocomplete="off" />
        </div>
      </div>

    </div>
  </div>

</header>


    <div class="page-content">
      <div class="container">
        
  <div class="post">

      <div class="row">
        <div class="col-sm-12">

          <header class="post-header">
            <h1 class="post-title">Twelve things to watch out for when coding a PrestaShop module</h1>
              
                <h3 class="post-subtitle">Do you commit these mistakes? Do not make them further.</h3>
              
          </header>

        </div>
      </div>


      <div class="row">
        <div id="post-sidebar" class="col-md-2">

          <aside class="author">
              <div class="author-avatar clearfix">
  
  
      

      <img class="img-circle" src="https://avatars3.githubusercontent.com/u/2137763?v=3&amp;s=400"
         alt="Krystian Podemski's photo">
  
</div>

<div class="aside-meta">Written by</div>
<div class="author-name">
  
    <div class="author-item">
      <div class="author-display-name">Krystian Podemski</div>
        
          <div class="author-display-role">Tech Evangelist @ PrestaShop</div>
        
    </div>
  
</div>

          </aside>

          <aside class="post-meta-sidebar">
              <div class="aside-meta">Published</div>
<p class="publish-date">
    Jul 25, 2016
</p>

          </aside>

          <aside class="share-buttons">
              <div class="aside-meta">Share this</div>

<a href="https://twitter.com/intent/tweet?text=Twelve&#43;things&#43;to&#43;watch&#43;out&#43;for&#43;when&#43;coding&#43;a&#43;PrestaShop&#43;module&amp;url=https%3A%2F%2Fbuild.prestashop-project.org%2Fhowtos%2Fmodule%2FCommon-mistakes-while-coding-module%2F&amp;via=PrestaShopOrg&amp;related=PrestaShopOrg" rel="nofollow" target="_blank" title="Share on Twitter">
    <i class="icon-twitter-alt"></i>
</a>

<a href="https://facebook.com/sharer.php?u=https%3A%2F%2Fbuild.prestashop-project.org%2Fhowtos%2Fmodule%2FCommon-mistakes-while-coding-module%2F" rel="nofollow" target="_blank" title="Share on Facebook">
    <i class="icon-facebook-alt"></i>
</a>

          </aside>

        </div>

        <div class="col-md-10">

          <article class="post-content">

              <p>PrestaShop has been around for many years, during which thousands of modules were made by thousands of developers, yet we still see the same simple mistakes being made, even though they could easily be avoided.</p>
<p>Here is a list of 10+ common mistakes when coding a PrestaShop module, with a short information on how to avoid them.</p>



<div class="alert alert-note"><h4><i class="icon-file"></i>
        Note
    </h4>Several tips only apply to PrestaShop 1.5-1.6 module development. <a href="/news/2016/module-development-changes-in-17/">PrestaShop 1.7 changes a few things</a>!
</div>

<h3 id="1-creatingusing-a-module-with-hardcoded-database-prefix">1. Creating/using a module with hardcoded database prefix</h3>
<p>This can be surprising to some but, yes, I saw this a few times: developers using the &ldquo;ps_&rdquo; prefix in their SQL schemas, or SQL queries.</p>
<p>How to avoid this? Always use PrestaShop&rsquo;s <code>_DB_PREFIX_</code> constant, which is the prefix that is defined by the user during installation.</p>
<h3 id="2-making-sure-your-module-can-be-translated">2. Making sure your module can be translated</h3>
<p>PrestaShop 1.6 has an amazing translations system. Users can easily translate themes and modules from their back office, but not all themes/modules are available there, why so? Some module developers still forget to make their creation translatable, or make mistakes by using not the proper code for a translation.</p>
<p>Remember:</p>
<ul>
<li>
<p>Translations inside module files:
<code>$this-&gt;l('Translatable text')</code></p>
</li>
<li>
<p>Translations inside the module&rsquo;s back-office controller (which extends ModuleAdminController):
<code>$this-&gt;l('Translatable text')</code></p>
</li>
<li>
<p>Translations inside the module&rsquo;s front-office controller (which extends ModuleFrontController):
<code>$this-&gt;module-&gt;l('Translatable text', 'controller_name')</code></p>
</li>
<li>
<p>Translations inside mails:
<code>Mail::l('Translatable text')</code></p>
</li>
<li>
<p>Translations inside PDF files:
<code>PDF::l('Translatable text')</code></p>
</li>
</ul>
<p>Remember to use English as your default language in translations! Indeed, it is always easier to find people to translate from English than other languages.</p>
<p>Note that PrestaShop 1.7 completely <a href="http://build.prestashop.com/news/new-translation-system-prestashop-17/#calling-symfonys-translator">updates the way translation is defined</a>.</p>
<h3 id="3-data-validation---do-not-trust-your-users-or-yourself">3. Data validation - do not trust your users or yourself!</h3>
<p>Recent events show that even the most popular modules or themes can be affected by security flaws and exploited by hackers. There are a few simple steps which will help you keep your modules secure:</p>
<ul>
<li>Always check the input data: use <code>Tools::getValue('var')</code> instead of <code>$_POST['var']</code>, <code>$_GET['var']</code>.</li>
<li><a href="http://php.net/manual/en/language.oop5.typehinting.php">Type hinting</a> makes sure the value has the correct type: use <code>(int)</code>, <code>(bool)</code>, <code>(float)</code> properly, check the public methods available in the <a href="https://github.com/PrestaShop/PrestaShop/blob/develop/classes/Validate.php"><code>classes/Validate.php</code></a> file, such as  <a href="https://github.com/PrestaShop/PrestaShop/blob/develop/classes/Validate.php#L686-L695"><code>isUnsignedInt()</code></a>.</li>
<li>The PrestaShop token is your friend: always check the token when doing action for logged in customers. Need an example?</li>
</ul>
<script type="application/javascript" src="https://gist.github.com/kpodemski/13a33eba6b43e9b6db7d29e491104ae1.js"></script>

<p>You can also check the token for guest users: I suggested <a href="https://github.com/PrestaShop/PrestaShop/pull/5863/files">these two methods</a>.</p>
<ul>
<li>Secure your files: files outside your module&rsquo;s base file (such as <code>ajax.php</code>, <code>upload.php</code>, etc.) should have a check at their very beginning in order to make sure they cannot be triggered directly. Here is example:</li>
</ul>
<script type="application/javascript" src="https://gist.github.com/kpodemski/5717d7c36d4277a71fa67746bb8efade.js"></script>

<h3 id="4-setup-module-compatibility-and-restrictions">4. Setup module compatibility and restrictions</h3>
<p>Let&rsquo;s be honest, sometimes it&rsquo;s hard to maintain a module from version to version, and sometimes you&rsquo;d like to release a module only for specific versions of PrestaShop, even specific countries!</p>
<p>How to set the compatibility of your module? In your <code>__construct</code> method:</p>
<p><code>$this-&gt;ps_versions_compliancy = array('min' =&gt; '1.6.1.0', 'max' =&gt; _PS_VERSION_);</code></p>
<p>This code will not allow to install the module if you have PrestaShop in version lower than 1.6.1.0.</p>
<p>How to restrict your module for specific countries? In your <code>__construct</code> method:</p>
<p><code>$this-&gt;limited_countries = array('fr', 'pl');</code></p>
<p>This code will not allow to install the module in countries other than France and Poland. Use <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">ISO-3166 codes</a>!</p>
<h3 id="5-do-not-trigger-code-if-it-is-for-a-specific-page">5. Do not trigger code if it is for a specific page</h3>
<p>If you are using the <code>displayHeader</code> hook to add features to the Product Page (for instance), do not use this code if you&rsquo;re not on page where you have a single product.</p>
<p>You can easily contextualize your code by simply using <code>if</code> statements:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">hookDisplayHeader</span><span class="p">(</span><span class="nv">$params</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// A good practice is to stop code as soon as possible if we don&#39;t need it.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">context</span><span class="o">-&gt;</span><span class="na">controller</span><span class="o">-&gt;</span><span class="na">php_self</span> <span class="o">!==</span> <span class="s1">&#39;product&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Rest of the code
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>Quick tip: it&rsquo;s worth noting that if you want to get some information from the Product object, you can do this with this code:
<code>$product = $this-&gt;context-&gt;controller-&gt;getProduct()</code>.<br>
There is no need to do <code>new Product(...)</code>. This code will work on a single-product page.</p>
<h3 id="6-too-much-going-on-in-your-__constructor">6. Too much going on in your __constructor</h3>
<p>Yes, this can be tricky. Very often I see modules where developers try to do some stuff in the <code>__construct</code> method of their module. It is Not Good. Definitely. Why? Because this code will therefore be triggered on the front office, the back office Modules page, and a few other pages. Be responsible, place your code in hooks, or target a specific page like it was described in point #5.</p>
<h3 id="7-conflicts-conflicts-everywhere">7. Conflicts, conflicts everywhere!</h3>
<p>So you&rsquo;ve created an amazing carousel with products selected from back office, proudly using <a href="http://www.owlgraphic.com/owlcarousel/">owlCarousel</a>, <a href="http://kenwheeler.github.io/slick/">slick.js</a> or any other popular library. Great!<br>
Now a customer bought another carousel module, one with product reviews, and it turns out that this module is using the same library: now nothing is really working.</p>
<p>What can we do to avoid this problem? Well, there&rsquo;s no 100%-safe solution for this problem, but you, as a Good Developer, can be nice to other developers (or theme authors), and allow your customers to disable loading of libraries from your module. Take the time to add a section in your Settings called &ldquo;Troubleshooting&rdquo; for example, and create a settings where your user can select which libraries can by turned off from your module.</p>
<h3 id="8-your-module-has-front-office-controllers-but-you-didnt-register-them">8. Your module has front office controllers but you didn&rsquo;t register them&hellip;</h3>
<p>&hellip;and if that&rsquo;s a case, your user cannot set where the left or right column should be displayed. If you&rsquo;re using front office controllers within your module, remember to register them properly in your <code>__construct</code> method:</p>
<p><code>$this-&gt;controllers = array('my-controller', 'other-controller');</code></p>
<h3 id="9-weird-ways-to-do-module-updates">9. Weird ways to do module updates</h3>
<p>The day has come, you have a new version of your module and you&rsquo;d like to change its database schema, add some new hooks etc. There&rsquo;s no need to implement your own update mechanisms, PrestaShop already has one!</p>
<p>Let&rsquo;s assume that you have MyModule v1.0.0 and you&rsquo;d like to update it to v1.1.0, this is example file:</p>
<script type="application/javascript" src="https://gist.github.com/kpodemski/51d470da4ced53fd946f5d774044f69f.js"></script>

<p>You need to remember about few things:</p>
<ul>
<li>This code will fire only if your current module&rsquo;s version is 1.0.0 and you visit the Module&rsquo;s page.</li>
<li>You have access to the <code>$object</code> variable, which is simply an instance of your module.</li>
<li>You always should return a boolean (<code>true</code> or <code>false</code>): this will trigger the success or error message in the back office.</li>
</ul>
<p>As you can see, you can create migration of the database, change configurations, add new hooks and do almost everything you need to do while updating your module to the next version.</p>
<p>Quick note: if you add a few version-specific files (for example: install-1.1.0.php, install-1.2.0.php), they&rsquo;ll run one after the other. Make sure that you check if a target database table exists, or a file exists: it is easy to break something here if you&rsquo;re not careful.</p>
<h3 id="10-lack-of-multi-lang-multi-store-support">10. Lack of multi-lang, multi-store support</h3>
<p>This is real problem. Many modules are not compatible with PrestaShop&rsquo;s multi-store feature, even its multi-lang feature. Customers just cannot use these modules in their specific situation.</p>
<p>There are many examples on how to create a module which is compliant with PrestaShop&rsquo;s multi-store feature, take some time and check how it&rsquo;s done in modules like: <a href="https://github.com/PrestaShop/homeslider/tree/master">homeslider</a>, <a href="https://github.com/PrestaShop/blocklink/tree/master">blocklink</a>, <a href="https://github.com/PrestaShop/blocktopmenu/tree/master">blocktopmenu</a> and <a href="https://github.com/PrestaShop/PrestaShop/tree/1.6.1.x/modules">many other native modules</a>.</p>
<h3 id="11-ignoringnot-knowing-prestashop-validator">11. Ignoring/not knowing PrestaShop Validator</h3>
<p>Did you know that PrestaShop has a pretty good validator for your PrestaShop modules? No? Visit <a href="http://validator.prestashop.com">validator.prestashop.com</a> and test your module today.</p>
<p>You&rsquo;ll avoid many basic mistakes while creating your module, as some rules are&hellip; doubtful :) There are many things which can be fixed thanks to the Validator.</p>
<p>Even if you don&rsquo;t agree with some of its rules, you shouldn&rsquo;t ignore the Validator completely: it is a good start for checking if your module is compliant with PrestaShop&rsquo;s standards.</p>
<h3 id="12-inventing-the-wheel-again">12. Inventing the wheel again</h3>
<p>You&rsquo;d like to do ajaxed autocomplete? Or maybe create a settings form for your module? Check how it&rsquo;s done with native modules, be familiar with <a href="http://doc.prestashop.com/display/PS16/Using+the+HelperForm+class"><code>HelperForm</code></a>, <a href="http://doc.prestashop.com/display/PS16/Using+the+HelperOptions+class"><code>HelperOptions</code></a>, and read code! Read the <a href="https://github.com/PrestaShop/PrestaShop/tree/1.6.1.x">code of the Core</a>, analyze <a href="https://github.com/PrestaShop/PrestaShop/tree/1.6.1.x/modules">native modules</a>, analyze open-source modules.</p>
<p>Developers often don&rsquo;t know how something is constructed, and they are willing to sit for 2-3 hours more in order create something by themselves, without reading how it&rsquo;s already done in different modules or places of the back office. If you want to be a better developer of PrestaShop&rsquo;s modules, look how many features and tools PrestaShop&rsquo;s API already provides you with.</p>
<hr>
<p>Did these tips help you create better modules? Do you still have some questions? Was there a step too hard? Let us know in the comments!</p>



<div class="alert alert-note"><h4><i class="icon-file"></i>
        Note
    </h4>This article is a contribution from a member of the PrestaShop community, and not a PrestaShop employee. If you too want to help the community by sharing tips and advice on the Build devblog, <a href="/about/#contribute">read this</a>!
</div>



          </article>

            


            

  <div class="post-meta">
    <div class="row">

      <div class="col-md-4">
        <ul class="details">
          <li class="hidden-md hidden-lg">Jul 25, 2016</li>

          
            <li>
              <i class="icon-tag"></i>

              
  <a class="label label-primary" href="/tag/howto/">howto</a>

  <a class="label label-primary" href="/tag/tutorial/">tutorial</a>

  <a class="label label-primary" href="/tag/modules/">modules</a>



            </li>
          

        </ul>
      </div>

      
      <div class="col-md-8">
        <div class="author-details">

          <div class="row">
            <div class="col-md-11 col-md-offset-1">

              

                <h5>About the author</h5>

                
    <h4>
      Krystian Podemski
      <span>Tech Evangelist @ PrestaShop</span>
    </h4>

    
      <a class="btn btn-default btn-sm" href="https://github.com/kpodemski">
        <i class="icon-github-alt"></i> GitHub
      </a>
    
    
      <a class="btn btn-default btn-sm" href="https://www.prestashop.com/forums/user/30365-krystian_podemski">
        <i class="icon-chat-alt"></i> Forum
      </a>
    
    
      <a class="btn btn-default btn-sm" href="https://crowdin.com/profile/kpodemski">
        <i class="icon-globe"></i> Crowdin
      </a>
    
    
      <a class="btn btn-default btn-sm" href="https://twitter.com/podemski">
        <i class="icon-twitter-alt"></i> Twitter
      </a>
    
    
  


              

            </div>

          </div>
        </div>
      </div>
      

    </div>
  </div>


        </div>
      </div>

      <div class="row">
  <div class="col-md-12">
    <div id="disqus_thread"></div><div id="disqus_thread"></div>
        <script type="application/javascript">
          window.disqus_config = function () {
              
              
              this.page.url = 'https:\/\/build.prestashop-project.org\/howtos\/module\/Common-mistakes-while-coding-module\/';
          };
          (function() {
            if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
              document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
              return;
            }
            var d = document, s = d.createElement('script'); s.async = true;
            s.src = '//' + "prestashopbuild" + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
</div>

    </div>

      </div>
    </div>

    <footer class="site-footer">
  <div class="container">

    <div class="row">
      <div class="col-sm-12 col-md-8 col-md-offset-2">
        <p>Official PrestaShop project blog written by
          <a href="/authors">its members and contributors</a>.
        </p>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12 col-md-8 col-md-offset-2">
        <p>
          <a href="https://www.prestashop-project.org" target="_self" title="Create your online store with PrestaShop">
            <img id="logo-dotcom" src="/assets/images/theme/logo-prestashop-com.png" alt="Create your online store">
          </a>
        </p>
      </div>
    </div>

    <div class="row">
      <div id="social-icons" class="col-sm-12 col-md-6 col-md-offset-3">

        

        <a href="https://www.youtube.com/@prestashopproject/" title="YouTube channel">
          <i class="icon-youtube-alt"></i>
        </a>

        
        <a href="https://github.com/PrestaShop" title="GitHub repository">
          <i class="icon-github-alt"></i>
        </a>
        

        
        <a href="https://twitter.com/PrestaShopOrg" title="Twitter account">
          <i class="icon-twitter-alt"></i>
        </a>
        

        

        <a href="/feed.xml" title="RSS feed for this blog">
          <i class="icon-rss"></i>
        </a>

      </div>
    </div>

  </div>
</footer>




<script type="text/javascript" src="/js/vendors/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="/js/vendors/bootstrap.min.js"></script>

<script type="text/javascript" src="/js/vendors/md5.js"></script>

<script type="text/javascript" src="/js/app.js"></script>


  <script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
  <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
  <script type="text/javascript">

    var client = algoliasearch("17LZR6CZEL", "79e7d4e77871f415092b78b82a66eaf0");
    var index = client.initIndex('blog');

    
    autocomplete('#aa-search-input',
      { hint: false, debug: false, autoselect: false, minLength: 4 }, {
        source: autocomplete.sources.hits(index, {hitsPerPage: 6}),
        
        displayKey: 'name',
        
        templates: {
          
          suggestion: function(hit) {
            var str =
              '<a href="' + hit.url + '">' +
              '<span class="hit-title"> ' + hit._highlightResult.title.value + '</span>' +
              '</a>'
            ;

            return str;
          },
          
          empty: function() {
            return '<div class="empty-result">Sorry we couldn\'t find anything.</div>';
          },
          footer: function() {
            return '<p class="algolia-credits">Powered by <img src="/assets/images/theme/algolia.jpg"></p>';
          }
        }
      });
  </script>




  </body>

</html>
